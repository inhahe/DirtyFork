# no value you aren't actually going to use needs to be in here. the config object returns None for anything that's missing.
# todo: option to star out passwords when they're being typed
# non-required input fields won't be validated.
# default to required if it's not specified?
# add int range checks to input fields validation specification?
bbs_name: The Dirty Fork
hostname: logoplex3 # can also be an ip address
port: 23

database: DirtyFork.db

login: 
  type: class # should we make this a module?
  target: login

log:
  path: DirtyFork.log # todo: options for breaking up logs into multiple files, keeping them below a certain length, keeping them younger than a certain age. is there a library for this?

input_fields: !include input_fields.yaml  
# hmm, if we keep input_fields in this file, we can use anchors on the edit types so that fields defined in here can include the anchor instead of just the name of the type, 
# which would require more work for the bbs
# but i think we'd still have to manually load from the name in the forum module since its input fields aren't defined in any yaml.

modules: 
  - door
  - teleconference
  - forum
  - files

main_destination: user_director # after login or registration. user_director will be a small program that sends you to a place based on what's in your config or keys.

# black, red, green, brown, blue, magenta, cyan, gray, br, dark, fg, bg

user_defaults: # currently we have some things stored in the database and some things stored in yaml files, maybe not ideal, though i think there is a kind of sensible separation.
  scroll_region: # todo: I'm just gonna ignore col width for now and set the scroll region with ANSI
    
    col: 1
    row: 1
    height: 4
    # width: "{screen_width}" # how would I do this? .format_map returns a string. I need an int.
    width: "full"
    box: # todo: somehow give the option of there only been a line separating the scroll regions. going all the way from one side of the screen to the other.
      fg: green # maybe a type: parameter that can be line, box, or none, or.. no, a parameter to just use ansi's support for scrolling or to emulate the sides'
      bg: black # to: if it only does ansi scrolling, then it can't be a box an should be a line.
      br_fg: false
      br_bg: false
      double_lined: false

  default_menu_color: [reset, br, fg, white]
  default_inaccessible_color: [br, fg, black] # do we want this or gray? which is darker?
  time_zone_format: '%Y/%m/%d %H:%M:%S {GMT}{"+" if time_zone_hour>=0 else "-"}:abs(time_zone_minute)}' #is that a valid way to show time zone? 
  # time_zone_format: '%Y/%m/%d %H:%M:%S {time_zone_letters}')
  # todo: process keys i read from config
  # make Config so that you can pass the object the important dictionaries at any time and then it'll use them
  # codes.format_map(dictionary)

destinations:
  register: !include register.yaml
  user_director:
    type: class
    target: user_director
  main: 
    type: menu
    screen:
      path: null 
    inputs:
      option:
        row: null
        col: null
        length: null
    white_keys: []
    black_keys: []
    options:
      Teleconference: # todo: make it so that option name.startswith(input) is enough to select that input, as long as only one match returns.
                      # automatically make Teleconfence show up as (T)eleconference, or (Te)leconference if there was another one starting with T, etc.
                      # or Te: Teleconference. yeah, i like that.
                      # but this means we no longer need 'name'. it's superfluous'
        type: module # if target were missing, it would look for a module by the same name as T.name in the BBS's directory
        target: teleconference
      Doors: 
        target: doors
        white_keys: [doors] # destinations can also have white_keys and black_keys. white keys are keys you need to use it. black_keys are keys you need to not have to use it. 
        black_keys: [banned] # users shouldn't be able to do anything if they the banned key, but i'm just going to test it on here first.
        screen_path: null
      Forums:
        target: forums
        type: menu
      File Library:
        target: files
        type: module
  forums: 
    type: menu
    forum_list:
      Philosophy: null # use this space to add black_keys and white_keys and such.
      Physics: null
      Spirituality & Mysticism: null 
    option_defaults:
      type: module              # hmm, we have a problem here. i made the custom edit_types so that we could use input_field's for the forums, but all the forums call a module, 
      target: forum                         # how can a module make use of the edit types? there's no yaml.' i guess it could pass the yaml subsection from config to a make_input_field function..
                                # todo: i think it currently just takes parameters for its properties, but we could change that. we could even entir a list of objects with properties and 
                                # have it cascade them so the first one is the most important? would we have a problem with the properties being in different places in the different 
                                # objects' hierarchies?
    options:
      <<: *forum_list
      Edit Forum:
        option_defaults: # todo: should i have the bbs inherit the option_defaults of type and target, or should i have to specify them again here?
          action: edit
        options:
          *forums
        
    # hmm, how could we auto-populate the forums menu from the sqlite3 database and still have this be a menu type?
    # or maybe we should just auto-populate the sqlite3 file based on the forums menu instead? that would involve less addition.
  doors:
    max_nodes: 20 # todo: i have no idea what a good value for this is.
                  # for simplicity, COM will always be 1, it doesn't matter since each door game instance will run on its own instance of DOSBox anyway.
    option_defaults: # or should we have defaults: options: type etc?
      type: module
      target: door
      white_keys: [doors]
      base_path: 'c:\doors'# any non-absolute path specified in door game configurations will be relative to this path.
    options:
      Trade Wars 2002:
        max_nodes: 4 # some doors require node number not be higher than max_nodes, some don't. to be safe, we'd better made node pools.
        white_keys: [doors] # destinations can also have white_keys and black_keys. white keys are keys you need to use it. black_keys are keys you need to not have to use it. 
        black_keys: [banned]
        communication_type: COM #types: com, fossil, stdio, socket
        dropfile_type: DOOR.SYS #if this is null or not included, just drop every type of file.
        dropfile_path: null #uses the same path as in the executable_path

#dropfile types to pass on command line:
#DOOR.SYS # pcboard
#DORINFO  # Wildcat
#CHAIN    # WWIV
#CALLINFO # Wildcat
#SFDOORS  # Spitfire
#TRIBBS   # TriBBS
#SPITFIRE   
#DOOR32   # modern

#dropfile filenames:
#DOOR.SYS      # Most common (PCBoard format)
#DORINFO1.DEF  # Wildcat/others
#CALLINFO.BBS  # Wildcat
#CHAIN.TXT     # WWIV
#SFDOORS.DAT   # Spitfire
#DOOR32.SYS    # modern
#TRIBBS.SYS    # TriBBS
      command: 'TW0002.EXE {node}'
      dir: 'TW2002'
      # todo: make sure we make exe_path work for .bat files too.
      #variables: %node, %com, %baud, %dropfile_path, %dropfile_dir, %dropfile_type %config_path %time_limit, %handle,  %socket_handle, 
        #%graphics_mode, %bbs_software, %data_path, %sysop_name, %bbs_name, %registration_key (probably don't need this variable, 
        #the user can just enter it in the command line. same for bbs name, sysop name, path, data_path, language (unless we internationalize the bbs), 
        #DEBUG/VERBOSE/-v/LOG, ui/theme color (e.g. BLUE, DARK), game-specific options), %rows, %cols, 
        #%irq, %io_port (e.g., 3F8), %uart_type (these three are old and rare)
        #you need to limit the number of nodes you run at once for a door game 
        # flags: LOCAL, FOSSIL, 
        #  maintenance modes: /DAILY, /MAINTENANCE, /MAINT, -MAINT
        # /RESET
        # /COMPACT
        # /BACKUP
        # /CLEANUP
        #TW2002.EXE -MAINT -COMPACT -BACKUP -EXPORT -TURNS
        #BRE.EXE /MAINTENANCE 
        #/NEWDAY 
        #/PACK
        #SRE.EXE /MAINT
        #/DAILY
        #/PACK
        #PLANETS.EXE /MAINT 
        #PLANETS.EXE /RESET
        #LORD.EXE /MAINT
        #/DAILY
        #/PACK
        #LORD2.EXE
        #/MAINT
        #/RESET
        #USURPER.EXE /M
        #/D
        #LOD.EXE -M
        #-DAILY
        #POKER.EXE /MAINT
        #GWAR.EXE /MAINT
        #/DAILY
        #FE.EXE /M
        #FE.EXE /DAILY
        #typical maintenance schedules: daily, weekly, monthly, time of day

        #typical command lines: 
        #door.exe %node
        #door.exe %node, %baud, %dropfile_path
        #door.exe /N:%node /D:%dropfile_path, 
        # or door.exe /N:%node /D:%dropfile_path, /B:%baud
        #door.exe %node %baud %dropfile_path N Y %rows %cols %handle %bbs_name
        #if you pass %node and no drop file path, the dropfile should be called e.g. DOOR3.SYS or DORINFO3.SYS for node 3
        #or, sometimes the dropfile doesn't take a number, like with TRIBBS. you have to make a unique ini file for dosbox which 
        #mounts the drive and cd's to the directory the door file is in.
        #you can make e.g. both DOOR3.SYS AND DOOR.SYS for node 3 to make all the doors happy.

  #graphics modes: ANSI, ASCII, RIP, AVATAR, G:ANSI
#bbs software types: PCBOARD, WILDCAT, WWIV, RENEGADE, MYSTIC, PCBOARD
  
        #common door games command-line parameters:
        #very common:
        #Trade Wars 2002: TW2002.EXE %node
        #Legend of the Red Dragon (LORD): LORD.EXE %node
        #Barren Realms Elite (BRE): BRE.EXE %dropfile_path (DOORINFO1.DEF format)
        #Planets: The Exploration of Space (TEOS): PLANETS.EXE /N%node
        #Usurper: USURPER.EXE /N%node
        #Solar Realms Elite: SRE.EXE %dropfile_path (DOORINFO1.DEF format)
        #Global War (GWar): GWAR.EXE %node
        #strategy/simulation: 
        #Falcons Eye: FE.EXE %node
        #Food Fight: FOODFITE.EXE %node
        #Mercenary Wars: MERC.EXE %dropfile_path (DOORINFO1.DEF format)
        #Swords of Chaos: SOC.EXE %node
        #Land of Devastation (LOD):
        #LOD.EXE %node
        #BBS Poker: POKER.EXE %node
        #Chess: CHESS.EXE %node %dropfile_path (DOOR.SYS)
        #
#         Trivia/Word Games:
# Fresh Water Fishing:
# FWFISH.EXE <node>
# FWFISH.EXE 1
# Studs:
# STUDS.EXE <node>
# STUDS.EXE 1
# Yankee Trader:
# YANKEE.EXE <node>
# YANKEE.EXE 1
# Scrabble-style games:
# WORD.EXE <node>
# WORD.EXE 1
# Adventure/RPG:
# LORD II: New World:
# LORD2.EXE <node>
# LORD2.EXE 1
# The Pit:
# PIT.EXE <node>
# PIT.EXE 1
# Darkness:
# DARK.EXE <node>
# DARK.EXE 1
# Leviathan's Lair:
# LEVIATAN.EXE <node>
# LEVIATAN.EXE 1
# Action/Arcade:
# DoorMUD:
# DOORMUD.EXE <node>
# DOORMUD.EXE 1
# BRE Arena (action version of BRE):
# ARENA.EXE DORINFO1.DEF
# Operation: Overkill (OO):
# OO.EXE <node>
# OO.EXE 1
# Utility Doors:
# InterBBS League Coordinator:
# LEAGUE.EXE <node>
# LEAGUE.EXE 1
# Top Ten Door:
# TOP10.EXE <node>
# TOP10.EXE 1
# User Lister:
# USERLIST.EXE <node>
# USERLIST.EXE 1
# Last Callers:
# LASTCALL.EXE <node>
# LASTCALL.EXE 1
        

